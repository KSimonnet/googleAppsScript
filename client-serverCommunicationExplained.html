/**
 * illustration of client-server communication
 * in this example, we:
 * pass the argument '0' to the server-side function `bufferFunction`, which is located in a .gs file and whose sole purpose is to
 * pass the argument to the client-side function `clientSideFunction`.
 * In turn, it calls the `captureFunction` and pass the argument to it.
 * In turn, it calls the server-side function `serverSideFunction` via `google.script.run`.
 * `serverSideFunction` then returns back up its result via the client-side method `withSuccessHandler`
 * which is then passed to the client-side function `clientSideFunction` through the resolve function of the Promise
 * whose fullfilled value is then assigned to the variable `target_val` by the `await` keyword.
 * Control can then use `target_val` on the client-side
 */
<script>
    google.script.run
    .withSuccessHandler(clientSideFunction)
    .bufferFunction(0);

    async function clientSideFunction(index) {
    const target_val = await captureFunction(index);
    console.log(target_val);
    }

    function captureFunction(x) {
    return new Promise((resolve) => {
        google.script.run
        .withSuccessHandler((result) => resolve(result))
        .serverSideFunction(x);
    });
    }
</script>